<!DOCTYPE NETSCAPE-Bookmark-file-1>
<!-- This is an automatically generated file.
     It will be read and overwritten.
     DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>Bookmarks</TITLE>
<H1>Bookmarks</H1>
<DL><p>
        <DT><A HREF="javascript: (function() { window.addScriptTag = function(fName, pn) { if (!fName) { fName = 'log'; } if (!pn) { pn = 1; } var src = 'https://api.bilibili.com/x/v2/reply?callback=' + fName + '&jsonp=jsonp&pn=' + pn + '&type=1&oid=' + window.aid + '&sort=2&_=' + new Date().getTime(); var script = document.createElement('script'); script.setAttribute(&quot;type&quot;, &quot;text/javascript&quot;); script.setAttribute(&quot;async&quot;, &quot;false&quot;); script.src = src; document.body.appendChild(script); }; /*%E8%8E%B7%E5%8F%96data*/ window.log = function(data) { this.data = data; console.log(window.data); this.allReply = []; this.allReply[0] = data.data.replies; getPage(data); }; /*%E8%8E%B7%E5%8F%96%E6%80%BB%E9%A1%B5%E6%95%B0*/ window.getPage = function(data) { var data2 = data.data; this.page = data2.page; this.count = page.count; this.maxPage = Math.ceil(page.count / page.size); this.pageCount = maxPage; window.pageConstant=30; console.log(window.pageCount); getAllReply(); }; /*%E8%8E%B7%E5%8F%96%E7%95%99%E8%A8%80*/ window.getReply = function(data) { var data2 = data.data; this.allReply.push(data2.replies); }; /*%E8%8E%B7%E5%8F%96%E5%85%A8%E9%83%A8%E7%95%99%E8%A8%80*/ window.getAllReply = function() { if(pageCount>pageConstant){ pageCount=pageConstant; } for (var i = 2; i < pageCount; i++) { addScriptTag('getReply', (i)); } }; /*%E8%8E%B7%E5%8F%96%E6%9B%B4%E5%A4%9A%E7%95%99%E8%A8%80*/ window.getMoreReply = function() { window.lastPage=pageCount; pageCount=pageCount+pageConstant; if(pageCount>maxPage){ pageCount=maxPage; } for (var i = lastPage; i < pageCount; i++) { addScriptTag('getReply', (i)); } if(pageCount<maxPage){ return true; }else{ return false; } }; /*%E5%88%86%E7%A6%BB%E5%87%BA%E6%80%A7%E5%88%AB*/ window.parseSex = function(data) { return data.member.sex; }; /*%E6%80%A7%E5%88%AB%E7%BB%9F%E8%AE%A1*/ window.sexCount = function() { sexData = []; sexData['%E7%94%B7'] = 0; sexData['%E5%A5%B3'] = 0; sexData['%E4%BF%9D%E5%AF%86'] = 0; for (idx1 in allReply) { for (idx2 in allReply[idx1]) { /*console.info(parseSex(allReply[idx1][idx2]));*/ sexData[parseSex(allReply[idx1][idx2])]++; } } console.info(sexData); return sexData; }; /*%E5%88%86%E7%A6%BB%E5%87%BA%E7%94%A8%E6%88%B7%E7%AD%89%E7%BA%A7*/ window.parseLevel = function(data) { return data.member.level_info.current_level; }; /*%E7%AD%89%E7%BA%A7%E7%BB%9F%E8%AE%A1*/ window.levelCount = function() { leveData = []; for (idx1 in allReply) { for (idx2 in allReply[idx1]) { var level=parseLevel(allReply[idx1][idx2]); if(!!leveData[level]){ leveData[level]++; }else{ leveData[level]=1; } /*console.info(parseLevel(allReply[idx1][idx2]));*/ } } window.leveData=leveData; console.info(leveData); return leveData; }; /*%E5%88%86%E7%A6%BB%E5%87%BA%E8%AF%84%E8%AE%BA%E6%97%B6%E9%97%B4*/ window.parseReplyTime = function(data) { var nowdate=new Date(data.ctime*1000); return nowdate; }; /*%E8%AF%84%E8%AE%BA%E6%97%B6%E9%97%B4%E7%BB%9F%E8%AE%A1(%E5%B9%B4%E6%9C%88)*/ window.replyTimeCountByYearAndMonth = function() { replyTimeByYearAndMonthData = []; for (idx1 in allReply) { for (idx2 in allReply[idx1]) { var date=parseReplyTime(allReply[idx1][idx2]); var year=date.getYear()+1900; var month=date.getMonth()+1; var formateDate=year+&quot;%E5%B9%B4&quot;+month+&quot;%E6%9C%88&quot;; if(!!replyTimeByYearAndMonthData[formateDate]){ replyTimeByYearAndMonthData[formateDate]++; }else{ replyTimeByYearAndMonthData[formateDate]=1; } /*console.info(parseReplyTime(allReply[idx1][idx2]));*/ } } window.replyTimeByYearAndMonthData=replyTimeByYearAndMonthData; console.info(replyTimeByYearAndMonthData); return replyTimeByYearAndMonthData; }; /*%E8%AF%84%E8%AE%BA%E6%97%B6%E9%97%B4%E7%BB%9F%E8%AE%A1(%E5%B9%B4%E6%9C%88%E6%97%A5)*/ window.replyTimeCountByYearMonthAndDay = function() { replyTimeByYearAndMonthData = []; for (idx1 in allReply) { for (idx2 in allReply[idx1]) { var date=parseReplyTime(allReply[idx1][idx2]); var year=date.getYear()+1900; var month=date.getMonth()+1; var day=date.getDate(); var formateDate=year+&quot;%E5%B9%B4&quot;+month+&quot;%E6%9C%88&quot;+day+&quot;%E6%97%A5&quot;; if(!!replyTimeByYearAndMonthData[formateDate]){ replyTimeByYearAndMonthData[formateDate]++; }else{ replyTimeByYearAndMonthData[formateDate]=1; } /*console.info(parseReplyTime(allReply[idx1][idx2]));*/ } } window.replyTimeByYearAndMonthData=replyTimeByYearAndMonthData; console.info(replyTimeByYearAndMonthData); return replyTimeByYearAndMonthData; }; /**%E5%88%86%E7%A6%BB%E5%87%BA%E8%AF%84%E8%AE%BA%E5%86%85%E5%AE%B9%E5%92%8C%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF*/ window.parseReplyContent = function(data) { var msgData={}; msgData.message=data.content.message; msgData.userInfo=data.member; msgData.allInfo=data; return msgData; }; /*%E8%AF%84%E8%AE%BA%E5%85%B3%E9%94%AE%E8%AF%8D%E6%A3%80%E7%B4%A2,content:%E6%A3%80%E7%B4%A2%E7%9A%84%E5%86%85%E5%AE%B9;numbers:%E5%8C%B9%E9%85%8D%E7%9A%84%E5%AD%97%E6%95%B0;allMatch:%E6%98%AF%E5%90%A6%E5%85%A8%E8%AF%8D%E5%8C%B9%E9%85%8D*/ window.searchReplyContent = function(content,numbers,allMatch) { contents = []; var contentReg=new RegExp(&quot;([\\w\\W]*?)&quot;+&quot;([&quot;+content+&quot;]+)&quot;+&quot;([\\w\\W]?)&quot;); if(!!numbers){ contentReg=new RegExp(&quot;([\\w\\W]*?)&quot;+&quot;([&quot;+content+&quot;]{&quot;+numbers+&quot;}+)&quot;+&quot;([\\w\\W]?)&quot;); } if(!!allMatch&&allMatch==true){ contentReg=new RegExp(&quot;([\\w\\W]*?)&quot;+&quot;([&quot;+content+&quot;]{&quot;+content.length+&quot;}+)&quot;+&quot;([\\w\\W]?)&quot;); } for (idx1 in allReply) { for (idx2 in allReply[idx1]) { var msgData=parseReplyContent(allReply[idx1][idx2]); msgData.page=idx1; msgData.row=idx2; var message=msgData.message; if(contentReg.test(message)){ msgData.message=message.replace(contentReg,&quot;$1<span class='fRed'>$2</span>$3&quot;); contents.push(msgData); /*console.info(parseReplyContent(allReply[idx1][idx2]));*/ } } } window.contents=contents; console.info(contents); return contents; }; /*%E8%BF%87%E6%BB%A4%E7%B2%89%E4%B8%9D%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF*/ window.filterFansReply = function (){ fansData = []; for (idx1 in allReply) { for (idx2 in allReply[idx1]) { if(!!allReply[idx1][idx2].member.fans_detail){ var userData=parseReplyContent(allReply[idx1][idx2]); userData.page=idx1; userData.row=idx2; fansData.push(userData); } } } window.fansData=fansData; console.info(fansData); return fansData; }; /*%E5%88%9D%E5%A7%8B%E5%8C%96*/ window.init=function(){ if(!this.allReply){ addScriptTag(); } }; init(); /*%E5%88%9B%E5%BB%BA%E5%AD%90%E7%AA%97%E5%8F%A3*/ window.createSubWin=function(){ window.subWin=window.open('','%E5%AD%90%E7%AA%97%E5%8F%A3','width=900,height=600,left=450,top=200'); var src=&quot;https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js&quot;; window.subDoc=subWin.document; window.subBody=subWin.document.body; window.iniJQ=function(){ var script = subDoc.createElement('script'); script.setAttribute(&quot;type&quot;, &quot;text/javascript&quot;); script.setAttribute(&quot;async&quot;, &quot;async&quot;); script.src = src; subDoc.head.appendChild(script); }; iniJQ(); var htmlContent=`<!DOCTYPE html> <html> <head> <meta charset=&quot;utf-8&quot;> <title>bilibili%E8%AF%84%E8%AE%BA%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7</title> <script src=&quot;https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js&quot;></script> <script src=&quot;https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js&quot;></script> <style> body { margin: 0px; padding: 0px; } .topContent { position: fixed; height: 50px; width: 100%; background-color: #FFFFFF; z-index: 12; margin: 0; padding: 0; text-align: center; box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.08); } .menuContent { position: fixed; padding: 0; margin: 0; left: 0; top: 0; bottom: 0; right: 0; background-color: #23ade5; color: white; width: 130px; box-shadow: 1px 1px 5px #888888; z-index: 11; } .menuContent>div:first-child { margin-top: 50px; text-align: center; } .menuContent div { /* margin-top: 10px; */ text-align: center; vertical-align: middle; float: left; width: 115px; } .menu { border: #FFFFFF solid 1px; margin-top: 15px; padding-right: 2px; margin-left: 5px; box-shadow: 1px 1px 5px #888888; } .menu:hover { background-color: rgb(35, 220, 220); cursor: pointer; } .dataContent,.indexContent { --ml:130px; margin-left: var(--ml); padding-top: 60px; padding-left: 0; padding-right: 0; --mw:800px; min-width: calc(var((--mw)-(--ml))); min-height: 270px; z-index: 10; /*background-color: #F5F5DC;*/ } .indexContent{ text-align: center; } .indexContent div{ text-align: left; width: 70%; display: inline-block; font-size: 20px; } #checkVersionH { font-size: 32px; } .dataContent{ display: none; } .icons { background-image: url(&quot;https://static.hdslb.com/images/base/icons.png&quot;); background-repeat: no-repeat; background-position: 0px 0px; display: inline-block; width: 50px; height: 50px; float: left; --bgx: -135px; --bgy: -75px; } .icon1 { background-position: var(--bgx) calc(var(--bgy)*1.1); } .icon2 { background-position: var(--bgx) calc(var(--bgy)*1.9); } .replyDiv { background-color: white; width: 638px; } .userImg img { height: 48px; width: 48px; vertical-align: middle; border-radius: 50%; padding: 0px 5px; } .userName { display: inline; vertical-align: middle; margin-left: 5px; } .levelImg { background-image: url(https://static.hdslb.com/phoenix/dist/images/icons-comment.png); display: inline-block; width: 19px; height: 9px; vertical-align: middle; margin: 0 8px; --levelImgX:-23px; --levelImgBaseY:-92px; --unit:-64px; --levelImgY: calc(0% + var(--levelImgBaseY) + calc(var(--unit) * var(--times))); background-position: var(--levelImgX) var(--levelImgY); } .levelImg1 { --times:0; } .levelImg2 { --times:1; } .levelImg3 { --times:2; } .levelImg4 { --times:3; } .levelImg5 { --times:4; } .levelImg6 { --times:5; } .levelImg7 { --times:6; } .levelImg8 { --times:7; } .replyContent{ margin-left: 58px; border-bottom: 1px solid #e5e9ef; padding-bottom: 5px; } .replyContentDiv{ text-align: center; display: none; } #replyContentList{ text-align: left; margin-left: 85px; } .searchDiv{ width: 638px; position: fixed; text-align: left; margin-left: 85px; padding: 0px; margin-top: -10px; background-color: white; } .searchInput{ width: 90%; overflow: hidden; height: 34px; background: #F4F4F4; border: 1px solid #E7E7E7; box-shadow: none; color: #999; font-size: 14px; line-height: 34px; vertical-align: middle; } .searchInput:hover{ background-color: rgba(240, 240, 240, 1); } .searchButton{ height: 34px; width: 50px; text-align: center; vertical-align: middle; display: inline-block; margin: auto 0; padding-top: 10px; background-color: #c5cbcc; color: white; } .searchButton:hover { background-color: #979a9a; cursor: pointer; } span.fRed { color: red; } .fansSign{ border: 1px solid #2EBDA7; color: #2EBDA7; border-radius: 3px; vertical-align: middle; } .bili_logo{ float: left; color: white; font-size: 32px; color: #00a1d6; vertical-align: middle; margin: 5px; display: inline-block; } .bili_logo div{ margin: 5px; display: inline; } .note{ color: red; } </style> </head> <body> <div class=&quot;topContent&quot;> <i class=&quot;bilifont bili-Navbar_logo bili_logo&quot;> <div> %E8%AF%84%E8%AE%BA%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7 </div> </i> </div> <div class=&quot;menuContent&quot;> <div> <div class=&quot;menu&quot;> <div onclick=&quot;showIndex()&quot;>%E9%A6%96%E9%A1%B5</div> </div> </div> <div> <div class=&quot;menu&quot;> <div onclick=&quot;sexCount()&quot;>%E7%94%A8%E6%88%B7%E6%80%A7%E5%88%AB%E7%BB%9F%E8%AE%A1</div> </div> </div> <div> <div class=&quot;menu&quot;> <div onclick=&quot;replyTimeCount()&quot;>%E8%AF%84%E8%AE%BA%E6%97%B6%E9%97%B4%E6%AE%B5%E7%BB%9F%E8%AE%A1</div> </div> </div> <div> <div class=&quot;menu&quot;> <div onclick=&quot;levelCount()&quot;>%E7%94%A8%E6%88%B7%E7%AD%89%E7%BA%A7%E7%BB%9F%E8%AE%A1</div> </div> </div> <div> <div class=&quot;menu&quot;> <div onclick=&quot;searchReplys()&quot;>%E5%85%B3%E9%94%AE%E5%AD%97%E6%90%9C%E7%B4%A2</div> </div> </div> <div> <div class=&quot;menu&quot;> <div onclick=&quot;fansReplys()&quot;>%E7%89%8C%E7%B2%89%E7%95%99%E8%A8%80%E4%BF%A1%E6%81%AF</div> </div> </div> </div> <div class=&quot;indexContent&quot; id=&quot;indexContent&quot;> <h2 id=&quot;checkVersionH&quot;>%E6%8F%92%E4%BB%B6%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B...</h2> <h2 id=&quot;getMoreData&quot;>5s%E5%90%8E%E6%8A%93%E5%8F%96%E6%9B%B4%E5%A4%9A%E8%AF%84%E8%AE%BA%E6%95%B0%E6%8D%AE</h2> <div><span class=&quot;note&quot;>%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9:</span><br>%E8%AF%B7%E5%8B%BF%E7%9F%AD%E6%97%B6%E9%97%B4%E5%86%85%E5%9C%A8%E5%A4%9A%E4%B8%AA%E8%A7%86%E9%A2%91%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%AF%A5%E6%8F%92%E4%BB%B6,%E5%90%A6%E5%88%99%E5%8F%AF%E8%83%BD%E4%BC%9A%E8%A2%ABB%E7%AB%99%E5%AE%98%E6%96%B9%E6%9A%82%E6%97%B6%E5%B0%81%E9%94%81IP,%E5%AF%BC%E8%87%B410%E5%88%86%E9%92%9F%E5%86%85%E6%97%A0%E6%B3%95%E6%9F%A5%E7%9C%8B%E8%A7%86%E9%A2%91%E8%AF%84%E8%AE%BA,%E5%90%8C%E6%97%B6%E4%B9%9F%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E8%AF%A5%E6%8F%92%E4%BB%B6(%E7%9B%AE%E5%89%8D%E8%AF%A5%E6%8F%92%E4%BB%B6%E6%AF%8F%E6%AC%A1%E6%8A%93%E5%8F%9630%E9%A1%B5%E7%9A%84%E8%AF%84%E8%AE%BA)</div> <div><br><br><a href=&quot;#&quot; onclick=&quot;window.open('https://space.bilibili.com/14618291')&quot;>%E4%BD%9C%E8%80%85B%E7%AB%99%E4%B8%BB%E9%A1%B5</a></div> </div> <div class=&quot;dataContent&quot; id=&quot;dataContent&quot;> </div> <div class=&quot;dataContent replyContentDiv&quot; id=&quot;replyContent&quot;> <dir class=&quot;searchDiv&quot;> <input class=&quot;searchInput&quot; id=&quot;searchInput&quot; onkeydown=&quot;keySearch()&quot;/> <div class=&quot;searchButton&quot; onclick=&quot;showReplysContent()&quot;>%E6%90%9C%E7%B4%A2</div> </dir> <div class=&quot;dataContent&quot; id=&quot;replyContentList&quot;> </div> </div> <script> var opener = window.opener; var toolVersion='%E7%89%88%E6%9C%AC%E5%8F%B7###version2020822151812###'; var newVersion=''; var timeOut=5; function ready(){ showIndex(); updateTimeOut(); } function showIndex(){ console.log(&quot;showIndex&quot;); $(&quot;#indexContent&quot;).css(&quot;display&quot;,&quot;block&quot;); $(&quot;#replyContent&quot;).css(&quot;display&quot;,&quot;none&quot;); $(&quot;#dataContent&quot;).css(&quot;display&quot;,&quot;none&quot;); /* setTimeout(&quot;checkVersion()&quot;,3*1000); */ } function checkVersion(){ console.log(&quot;checkVersion&quot;); if(!!newVersion&&toolVersion!=newVersion){ /*alert(&quot;%E6%9C%89%E6%96%B0%E7%89%88%E6%9C%AC!&quot;);*/ $(&quot;#checkVersionH&quot;).html(&quot;%E6%9C%89%E6%96%B0%E7%89%88%E6%9C%AC,%E8%AF%B7%E4%B8%8B%E8%BD%BD%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E6%8F%92%E4%BB%B6!<a href='https://github.com/616717724/bilibiliReplyTool'>%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2</a>&quot;); }else{ $(&quot;#checkVersionH&quot;).text(&quot;%E8%AF%A5%E6%8F%92%E4%BB%B6%E5%B7%B2%E7%BB%8F%E6%98%AF%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC&quot;); } } function updateTimeOut(){ if(0<timeOut&&timeOut<=5){ timeOut--; $(&quot;#getMoreData&quot;).text(timeOut+&quot;s%E5%90%8E%E6%8A%93%E5%8F%96%E6%9B%B4%E5%A4%9A%E8%AF%84%E8%AE%BA%E6%95%B0%E6%8D%AE&quot;); setTimeout(&quot;updateTimeOut()&quot;,1*1000); }else{ timeOut=5; $(&quot;#getMoreData&quot;).text(&quot;%E6%AD%A3%E5%9C%A8%E6%8A%93%E5%8F%96%E6%9B%B4%E5%A4%9A%E8%AF%84%E8%AE%BA%E6%95%B0%E6%8D%AE&quot;); setTimeout(&quot;getMoreReply();&quot;,1*1000); } } function getMoreReply(){ if(opener.getMoreReply()){ setTimeout(&quot;updateTimeOut();&quot;,1*1000); }else{ $(&quot;#getMoreData&quot;).text(&quot;%E5%B7%B2%E6%8A%93%E5%8F%96%E6%89%80%E6%9C%89%E8%AF%84%E8%AE%BA%E6%95%B0%E6%8D%AE&quot;); } } function sexCount() { if (!!opener) { setSexEcharts(); } } function levelCount() { if (!!opener) { setLevelEcharts(); } } function replyTimeCount(){ if (!!opener) { setReplyTimeByYearAndMonthEcharts(); } } function searchReplys(){ if (!!opener) { $(&quot;#dataContent&quot;).css(&quot;display&quot;,&quot;none&quot;); $(&quot;#indexContent&quot;).css(&quot;display&quot;,&quot;none&quot;); $(&quot;.searchDiv&quot;).css(&quot;display&quot;,&quot;block&quot;); $(&quot;#replyContent&quot;).css(&quot;display&quot;,&quot;block&quot;); $(&quot;#replyContentList&quot;).css(&quot;display&quot;,&quot;block&quot;); } } function fansReplys(){ if (!!opener) { $(&quot;#dataContent&quot;).css(&quot;display&quot;,&quot;none&quot;); $(&quot;#indexContent&quot;).css(&quot;display&quot;,&quot;none&quot;); $(&quot;.searchDiv&quot;).css(&quot;display&quot;,&quot;none&quot;); $(&quot;#replyContent&quot;).css(&quot;display&quot;,&quot;block&quot;); $(&quot;#replyContentList&quot;).css(&quot;display&quot;,&quot;block&quot;); showFansReplys(); } } </script> <script> function setSexEcharts(){ var sexData=opener.sexCount(); var sexDataKeys=Object.keys(sexData); var legendData=[]; var seriesData=[]; for(var i=0;i<sexDataKeys.length;i++){ var dataValue=sexData[sexDataKeys[i]]; var dataName=sexDataKeys[i]; if(!!dataValue){ legendData.push(dataName); seriesData.push({value:dataValue,name:dataName}); } } setPieChart('%E8%AF%84%E8%AE%BA%E7%94%A8%E6%88%B7%E6%80%A7%E5%88%AB%E7%BB%9F%E8%AE%A1',legendData,seriesData); } function setLevelEcharts(){ var levelData=opener.levelCount(); var levelDataKeys=Object.keys(levelData); var seriesDataName=[]; var seriesDataValue=[]; for(var i=0;i<levelDataKeys.length;i++){ var dataValue=levelData[levelDataKeys[i]]; var dataName=levelDataKeys[i]; if(!!dataValue){ seriesDataName.push(dataName); seriesDataValue.push(dataValue); } } setHistogramChart('%E8%AF%84%E8%AE%BA%E7%94%A8%E6%88%B7%E7%AD%89%E7%BA%A7%E7%BB%9F%E8%AE%A1',seriesDataName,seriesDataValue); } function setReplyTimeByYearAndMonthEcharts(){ var replyTimeData=opener.replyTimeCountByYearMonthAndDay(); var replyTimeDataKeys=Object.keys(replyTimeData); var seriesData=[['0',0]]; if(1<replyTimeDataKeys.length){ seriesData=[]; } /*%E6%97%B6%E9%97%B4%E6%8E%92%E5%BA%8F*/ for(var i=0;i<replyTimeDataKeys.length-1;i++){ for(var j=0;j<replyTimeDataKeys.length-1-i;j++){ if(parseDateToCompare(replyTimeDataKeys[j],replyTimeDataKeys[j+1])>0){ var temp=replyTimeDataKeys[j]; replyTimeDataKeys[j]=replyTimeDataKeys[j+1]; replyTimeDataKeys[j+1]=temp; } } } for(var i=0;i<replyTimeDataKeys.length;i++){ var dataValue=replyTimeData[replyTimeDataKeys[i]]; var dataName=replyTimeDataKeys[i]; if(!!dataValue){ seriesData.push([dataName,dataValue]); } } setLineChart('%E8%AF%84%E8%AE%BA%E7%94%A8%E6%88%B7%E6%97%B6%E9%97%B4%E6%AE%B5%E7%BB%9F%E8%AE%A1',seriesData); } function parseStrDate(date){ return new Date(date.replace(/[%E5%B9%B4%E6%9C%88%E6%97%A5]/g,'/')); } function parseDateToCompare(date1,date2){ date1=parseStrDate(date1); date2=parseStrDate(date2); return date1.getTime()-date2.getTime(); } /*%E8%AE%BE%E7%BD%AE%E9%A5%BC%E7%8A%B6%E5%9B%BE*/ function setPieChart(title,legendData,seriesData){ option = { title: { text: title, subtext: '', left: 'center' }, tooltip: { trigger: 'item', formatter: '{a} <br/>{b} : {c} ({d}%)' }, legend: { orient: 'vertical', left: 'left', data: legendData }, series: [ { name: '', type: 'pie', radius: '70%', center: ['50%', '60%'], data: seriesData } ] }; setEcharts(option); } /*%E8%AE%BE%E7%BD%AE%E7%BA%BF%E7%8A%B6%E5%9B%BE*/ function setLineChart(title,seriesData){ option = { title: { text: title, subtext: '', left: 'center' }, xAxis: { type: 'category', boundaryGap: false }, yAxis: { type: 'value', boundaryGap: [0, '30%'] }, visualMap: { type: 'piecewise', show: false, dimension: 0, seriesIndex: 0, pieces: [{ gt: 1, lt: 3, color: 'rgba(0, 180, 222, 0.5)' }, { gt: 5, lt: 7, color: 'rgba(0, 180, 222, 0.5)' }] }, series: [ { type: 'line', smooth: 0.6, symbol: 'none', lineStyle: { color: 'rgba(0, 180, 222, 0.5)', width: 5 }, markLine: { symbol: ['none', 'none'], label: {show: false}, data: [ {xAxis: 1}, {xAxis: 3}, {xAxis: 5}, {xAxis: 7} ] }, areaStyle: {}, data: seriesData } ] }; setEcharts(option); } function setHistogramChart(title,seriesDataName,seriesDataValue){ option = { color: ['#3398DB'], tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } }, grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true }, xAxis: [ { type: 'category', data: seriesDataName, axisTick: { alignWithLabel: true } } ], yAxis: [ { type: 'value' } ], series: [ { name: title, type: 'bar', barWidth: '60%', data: seriesDataValue } ] }; setEcharts(option); } /*%E8%AE%BE%E7%BD%AEEcharts*/ var myChart; function setEcharts(option){ $(&quot;#indexContent&quot;).css(&quot;display&quot;,&quot;none&quot;); $(&quot;#replyContent&quot;).css(&quot;display&quot;,&quot;none&quot;); $(&quot;#dataContent&quot;).css(&quot;display&quot;,&quot;block&quot;); if(!myChart){ var myChart = echarts.init(document.getElementById('dataContent')); } myChart.clear(); myChart.setOption(option); } </script> <script> var replyDivTemplate=''; var replyDivTemplate='<div class=&quot;replyDiv&quot;><div class=&quot;userImg&quot;><img src=&quot;@uImg@&quot;/><span class=&quot;fansSign&quot;>@uFansTitle@<span class=&quot;fansSignLevel&quot;>@uFansLevel@</span></span><div class=&quot;userName&quot;>@uName@</div><dir class=&quot;levelImg levelImg@uLevel@&quot;></dir></div><div class=&quot;replyContent&quot;>@uContent@</div></div>'; function showReplysContent(){ var contents=opener.searchReplyContent($(&quot;#searchInput&quot;).val()); var replyDivHtml=''; if(!!contents){ for(var i=0;i<contents.length;i++){ replyDivHtml+=parseReplyContent(contents[i]); } } $(&quot;#replyContentList&quot;).html(replyDivHtml); } function keySearch(){ if(window.event.key=='Enter'){ showReplysContent(); } } function parseReplyContent(content){ var uImg=content.userInfo.avatar; var uName=content.userInfo.uname; var uLevel=content.userInfo.level_info.current_level; var uContent=content.message; /*%E8%BF%94%E5%9B%9EHTML%E7%BB%93%E6%9E%9C*/ var replyDiv=replyDivTemplate.replace('@uImg@',uImg).replace('@uName@',uName).replace('@uLevel@',uLevel).replace('@uContent@',uContent); var allInfo=content.allInfo; var fans_detail=allInfo.member.fans_detail; if(!!fans_detail){ var uFansTitle=fans_detail.medal_name; var uFansLevel=fans_detail.level; replyDiv=replyDiv.replace('@uFansLevel@',uFansLevel); replyDiv=replyDiv.replace('@uFansTitle@',uFansTitle); }else{ replyDiv=replyDiv.replace('@uFansLevel@',''); replyDiv=replyDiv.replace('@uFansTitle@',''); } return replyDiv; } function showFansReplys(){ var contents=opener.filterFansReply(); var replyDivHtml=''; if(!!contents){ for(var i=0;i<contents.length;i++){ replyDivHtml+=parseReplyContent(contents[i]); } if(contents.length==0){ replyDivHtml='%E8%AF%A5UP%E6%9A%82%E6%97%B6%E6%9C%AA%E6%8B%A5%E6%9C%89%E7%89%8C%E7%B2%89'; } }else{ replyDivHtml='%E8%AF%A5UP%E6%9A%82%E6%97%B6%E6%9C%AA%E6%8B%A5%E6%9C%89%E7%89%8C%E7%B2%89'; } $(&quot;#replyContentList&quot;).html(replyDivHtml); } </script> </body> </html> `; subDoc.write(htmlContent); subWin.data=window.data; setTimeout(&quot;subWin.ready();&quot;,1*1000); }; createSubWin(); /*%E5%A4%8D%E5%88%B6b%E7%AB%99CSS*/ $(document).find(&quot;style&quot;).each(function (i,o){ $(o).clone().appendTo(subDoc.head); }); /*%E6%A3%80%E6%B5%8B%E7%89%88%E6%9C%AC%E9%A1%B5%E9%9D%A2*/ window.createVersionFrame=function(){ $.ajax({ url:'https://www.bilibili.com/read/cv7275487', success:function (data){ /*console.log(data);*/ versionReg=/<blockquote>.*?%E7%89%88%E6%9C%AC%E5%8F%B7###.*?###.*?<\/blockquote>/; versionElem=versionReg.exec(data); console.log(versionElem); if(!!versionElem){ newVersion=versionElem[0].replace(/<blockquote>.*?(%E7%89%88%E6%9C%AC%E5%8F%B7###.*?###).*?<\/blockquote>/,&quot;$1&quot;); } subWin.newVersion=window.newVersion; subWin.checkVersion(); } }); }; setTimeout(&quot;createVersionFrame()&quot;,2*1000); })();" ADD_DATE="0">bilibili评论统计分析工具</A>
    </DL><p>
